<?php
 namespace Mgt\Varnish\Controller\Api; class PurgeTag extends \Magento\Framework\App\Action\Action { protected $cachePurger; protected $config; public function __construct(\Magento\Framework\App\Action\Context $context, \Magento\CacheInvalidate\Model\PurgeCache $cachePurger, \Mgt\Varnish\Model\Cache\Config $config) { goto C6452; ff5d3: parent::__construct($context); goto C4da6; C6452: $this->cachePurger = $cachePurger; goto B7728; B7728: $this->config = $config; goto ff5d3; C4da6: } public function execute() { goto a5237; e8080: $response->setBody($body); goto ba869; a5237: $request = $this->getRequest(); goto C61c5; f48df: B70f9: goto b61ee; fe07d: $body = []; goto E3792; e2721: exit; goto E7202; b645f: try { goto D5c6f; db729: $body = ["\x73\x75\x63\x63\145\163\163" => 1, "\x6d\145\163\x73\x61\147\145" => sprintf("\x56\x61\162\x6e\x69\x73\150\x20\x43\141\x63\150\x65\40\x70\x75\x72\147\145\144\x20\x62\x79\40\x66\157\154\x6c\x6f\x77\151\156\147\40\x74\141\147\72\x20\x25\x73", $tag)]; goto Caa49; C98ba: throw new \Exception("\x53\x65\x63\162\x65\164\40\x61\x70\151\40\x6b\x65\171\x20\x69\163\40\156\157\x74\x20\143\x6f\162\162\x65\143\x74"); goto a36b3; Ed320: $tags = [$tag]; goto fea86; c4246: if (!($secretKey != $apiSecretKey)) { goto Bf63e; } goto C98ba; D5c6f: $apiSecretKey = $this->config->getApiSecretKey(); goto c4246; fea86: $this->cachePurger->sendPurgeRequest($tags); goto db729; a36b3: Bf63e: goto Ed320; Caa49: } catch (\Exception $e) { $errorMessage = $e->getMessage(); $body = ["\x73\165\143\x63\145\163\163" => 0, "\x6d\145\163\163\141\x67\x65" => $errorMessage]; } goto f48df; b61ee: $body = json_encode($body); goto d314d; e1c86: $tag = $request->getParam("\x74\x61\147"); goto aeaac; ba869: $response->sendResponse(); goto e2721; C61c5: $response = $this->getResponse(); goto fe07d; E3792: $secretKey = $request->getParam("\163\x65\143\x72\x65\164\x4b\x65\171"); goto e1c86; d314d: $response->setHeader("\x43\157\156\164\x65\x6e\164\x2d\124\x79\160\145", "\141\160\160\x6c\x69\143\141\x74\x69\x6f\156\57\152\x73\x6f\x6e"); goto e8080; aeaac: if (!($secretKey && $tag)) { goto B70f9; } goto b645f; E7202: } }
