<?php
 namespace Mgt\Varnish\Model; class License { const MODULE_NAME = "\x4d\x67\x74\137\x56\141\x72\156\x69\x73\150"; protected $dirReader; protected $domains = []; public function __construct() { $objectManager = $this->getObjectManager(); $this->dirReader = $objectManager->get("\134\x4d\141\x67\145\156\x74\x6f\134\x46\162\x61\155\145\167\157\x72\x6b\134\115\x6f\144\165\x6c\145\x5c\x44\151\x72\134\122\x65\141\x64\145\x72"); } public function hasLicense($currentHost) { goto e5e76; f05c0: ccff2: goto fb3e9; Ab727: $currentHost = str_replace("\167\x77\x77\56", '', $currentHost); goto E472c; Fcafc: if (!(isset($license["\x65\x78\160\x69\162\145\x44\x61\x74\x65"]) && $license["\x65\x78\160\151\162\145\x44\141\164\145"])) { goto cf20a; } goto B5552; A777b: eval(gzinflate(base64_decode(file_get_contents($licenseFile)))); goto Ab727; abf58: if (!(is_array($license) && $license["\155\x6f\144\x75\x6c\x65"] == self::MODULE_NAME && $isHostValid && (!$license["\145\x78\160\x69\162\145\104\141\164\145"] || $license["\145\x78\x70\151\162\x65\x44\141\164\x65"] && $expireDate->isLater(Zend_Date::now())))) { goto D9ee0; } goto Cbd7b; C9a31: $expireDate->setTimestamp($license["\x65\170\x70\151\x72\145\104\x61\x74\145"]); goto E8617; Efb92: D9ee0: goto f05c0; f8946: if (!(true === file_exists($licenseFile))) { goto ccff2; } goto A777b; fb3e9: return $hasLicense; goto e4150; Bf525: $licenseFile = $this->dirReader->getModuleDir('', self::MODULE_NAME) . "\x2f\154\151\x63\145\x6e\x73\145\x2e\155\x67\164"; goto f8946; b8d0b: $isHostValid = $this->_isHostValid($currentHost, $license["\x64\157\155\x61\x69\156\x73"]); goto abf58; B5552: $expireDate = new \Zend_Date(); goto C9a31; E472c: $today = new \DateTime(); goto Fcafc; e5e76: $hasLicense = false; goto Bf525; Cbd7b: $hasLicense = true; goto Efb92; E8617: cf20a: goto b8d0b; e4150: } protected function _isHostValid($currentHost, array $domains) { goto fa664; C5596: Ae0c0: goto B8ea7; B72c9: foreach ($domains as $domain) { goto bfeee; E2af4: goto Ae0c0; goto cdafe; cdafe: e97bb: goto ca82f; bfeee: if (!strstr($currentHost, $domain)) { goto e97bb; } goto Cce62; ca82f: cd73e: goto A6d86; Cce62: $isHostValid = true; goto E2af4; A6d86: } goto C5596; B8ea7: return $isHostValid; goto D4cdc; fa664: $isHostValid = false; goto B72c9; D4cdc: } public function getDomains() { goto D7a63; Ea81c: $domains = $license["\x64\157\x6d\141\x69\156\163"]; goto f91b2; b564a: $licenseFile = $this->dirReader->getModuleDir('', self::MODULE_NAME) . "\x2f\154\151\x63\145\156\163\x65\56\155\147\x74"; goto a17db; a17db: if (!(true === file_exists($licenseFile))) { goto e2a89; } goto bf294; A18d3: e2a89: goto A7a2b; f91b2: d672d: goto A18d3; A7a2b: return $domains; goto af6e3; Bb154: if (!(isset($license["\144\x6f\155\141\x69\x6e\163"]) && $license["\144\x6f\155\x61\151\156\163"])) { goto d672d; } goto Ea81c; bf294: eval(gzinflate(base64_decode(file_get_contents($licenseFile)))); goto Bb154; D7a63: $domains = []; goto b564a; af6e3: } protected function getObjectManager() { $objectManager = \Magento\Framework\App\ObjectManager::getInstance(); return $objectManager; } }
